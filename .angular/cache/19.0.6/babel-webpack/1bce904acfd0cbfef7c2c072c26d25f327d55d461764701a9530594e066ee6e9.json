{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/vanya/WebstormProjects/V-Design2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport * as uuid from 'uuid';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../shared/services/project.service\";\nimport * as i3 from \"src/app/shared/services/auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"ngx-toastr\";\nimport * as i6 from \"@angular/common\";\nfunction ProjectCreateComponent_p_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 18);\n    i0.ɵɵtext(1, \"Please enter valid title!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProjectCreateComponent_p_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 18);\n    i0.ɵɵtext(1, \"Please enter valid description!\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let ProjectCreateComponent = /*#__PURE__*/(() => {\n  class ProjectCreateComponent {\n    constructor(fb, projectService, auth, router, toastr) {\n      this.fb = fb;\n      this.projectService = projectService;\n      this.auth = auth;\n      this.router = router;\n      this.toastr = toastr;\n      this.urlRegex = '(https?://)?([a-z0-9/.-?-A-Z/&]+)';\n      this.files = [];\n      this.form = this.fb.group({\n        title: ['', [Validators.required, Validators.minLength(4)]],\n        author: ['', [Validators.required]],\n        description: ['', [Validators.required, Validators.minLength(10), Validators.maxLength(1000)]],\n        year: ['', [Validators.required]],\n        rating: [0],\n        file: [[]]\n      });\n    }\n    ngOnInit() {}\n    createProject() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const array = yield _this.projectService.uploadFiles(_this.files, _this.project.id);\n        _this.project = {\n          id: uuid.v4(),\n          title: _this.form.value.title,\n          year: _this.form.value.year,\n          description: _this.form.value.description,\n          rating: 0,\n          imageUrl: array\n        };\n        yield _this.projectService.create(_this.project);\n        yield _this.router.navigate(['projects-portfolio']);\n        _this.toastr.success('Successfully created project');\n      })();\n    }\n    onFileChange(event) {\n      for (let i = 0; i < event.target.files.length; i++) {\n        this.files.push(event.target.files[i]);\n      }\n    }\n    static {\n      this.ɵfac = function ProjectCreateComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ProjectCreateComponent)(i0.ɵɵdirectiveInject(i1.UntypedFormBuilder), i0.ɵɵdirectiveInject(i2.ProjectService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.ToastrService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProjectCreateComponent,\n        selectors: [[\"app-project-create\"]],\n        standalone: false,\n        decls: 29,\n        vars: 3,\n        consts: [[1, \"create-project-container\"], [\"src\", \"/assets/img/create.jpg\"], [1, \"create-project\"], [1, \"logo-form\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-field\"], [\"for\", \"create-title\", 1, \"title\"], [1, \"hidden\"], [\"id\", \"create-title\", \"formControlName\", \"title\", \"value\", \"Project title\", \"placeholder\", \"Project title\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"for\", \"create-description\", 1, \"description\"], [\"rows\", \"4\", \"cols\", \"18\", \"id\", \"create-description\", \"formControlName\", \"description\", \"placeholder\", \"Description\"], [\"for\", \"create-year\", 1, \"year\"], [\"type\", \"number\", \"min\", \"2000\", \"max\", \"2099\", \"step\", \"1\", \"value\", \"2020\", \"id\", \"create-year\", \"formControlName\", \"year\"], [\"formControlName\", \"file\", \"type\", \"file\", \"multiple\", \"\", \"placeholder\", \"Upload images\", \"accept\", \"image/*\", 1, \"ng-file-upload\", 3, \"change\"], [1, \"button\"], [1, \"button__horizontal\"], [1, \"button__vertical\"], [1, \"error-message\"]],\n        template: function ProjectCreateComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0);\n            i0.ɵɵelement(1, \"img\", 1);\n            i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3);\n            i0.ɵɵtext(4, \"Create project\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"form\", 4);\n            i0.ɵɵlistener(\"ngSubmit\", function ProjectCreateComponent_Template_form_ngSubmit_5_listener() {\n              return ctx.createProject();\n            });\n            i0.ɵɵelementStart(6, \"div\", 5)(7, \"label\", 6)(8, \"span\", 7);\n            i0.ɵɵtext(9, \"Project title\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(10, \"input\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(11, ProjectCreateComponent_p_11_Template, 2, 0, \"p\", 9);\n            i0.ɵɵelementStart(12, \"div\", 5)(13, \"label\", 10)(14, \"span\", 7);\n            i0.ɵɵtext(15, \"Project description\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(16, \"textarea\", 11);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(17, ProjectCreateComponent_p_17_Template, 2, 0, \"p\", 9);\n            i0.ɵɵelementStart(18, \"div\", 5)(19, \"label\", 12)(20, \"span\", 7);\n            i0.ɵɵtext(21, \"Project year\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(22, \"input\", 13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"div\", 5)(24, \"input\", 14);\n            i0.ɵɵlistener(\"change\", function ProjectCreateComponent_Template_input_change_24_listener($event) {\n              return ctx.onFileChange($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(25, \"button\", 15);\n            i0.ɵɵtext(26, \" Create \");\n            i0.ɵɵelement(27, \"div\", 16)(28, \"div\", 17);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.form.get(\"title\").invalid && ctx.form.get(\"title\").touched);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.form.get(\"description\").invalid && ctx.form.get(\"description\").touched);\n          }\n        },\n        dependencies: [i6.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.MaxValidator, i1.FormGroupDirective, i1.FormControlName],\n        styles: [\".create-project-container[_ngcontent-%COMP%]{background-color:var(--text-headings-color);width:100vw;height:100%}.create-project[_ngcontent-%COMP%]{width:80vw;height:auto;display:flex;flex-direction:column;align-items:center;margin:-.25em auto;background-color:var(--text-primary-color);background-blend-mode:hue;padding-bottom:1em;padding-top:1em;color:var(--text-headings-color)}@media (max-width: 1024px){.create-project[_ngcontent-%COMP%]{padding:1em}}@media (max-width: 768px){.create-project[_ngcontent-%COMP%]{padding:1em}}@media (max-width: 568px){.create-project[_ngcontent-%COMP%]{padding:1em}}.logo-form[_ngcontent-%COMP%]{position:relative;font-weight:700;font-size:2em;color:var(--golden-text);text-shadow:0 0 .2em var(--text-headings-color);padding-left:.5em}.create-project[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-style:italic;color:var(--text-headings-color);border:2px solid var(--golden-text);padding:.2em;background-color:#fff}button[_ngcontent-%COMP%]{margin:2em auto;text-shadow:0 0 .2em var(--text-headings-color)}div.form-field[_ngcontent-%COMP%]:last-child{margin-bottom:2em}.create-project[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:var(--text-headings-color)}.create-project[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-right:2em}.form-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5em}.form-field[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:.4em}.form-field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{color:var(--text-headings-color);font-weight:100}.create-project-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:10em;object-fit:cover;object-position:100% 50%;background-color:#000;opacity:.7}\"]\n      });\n    }\n  }\n  return ProjectCreateComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}