{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/vanya/WebstormProjects/V-Design2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport firebase from 'firebase/compat/app';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth.service\";\nimport * as i2 from \"@angular/fire/compat/firestore\";\nimport * as i3 from \"@angular/fire/compat/storage\";\nexport let ProjectService = /*#__PURE__*/(() => {\n  class ProjectService {\n    constructor(auth, db, afStorage) {\n      this.auth = auth;\n      this.db = db;\n      this.afStorage = afStorage;\n      this.array = [];\n      this.projectsCollection = db.collection('projects').ref;\n    }\n    getCollection() {\n      return this.projectsCollection.get();\n    }\n    getProject(id) {\n      return this.projectsCollection.doc(id).get();\n    }\n    create(project) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        return _this.projectsCollection.doc(project.id).set(project);\n      })();\n    }\n    delete(id) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        yield _this2.projectsCollection.doc(id).delete();\n      })();\n    }\n    rate(star, project) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        if (project.rating === 0) {\n          project.rating += star;\n        }\n        project.rating += star;\n        project.rating = project.rating / 2;\n        Math.round(project.rating);\n        yield _this3.db.collection('projects').doc(project.id).update({\n          rating: project.rating\n        });\n      })();\n    }\n    uploadFiles(files, id) {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        const storageRef = firebase.storage().ref();\n        for (let i = 0; i < files.length; i++) {\n          const task = storageRef.child('images/' + files[i].name).put(files[i]).then(snapshot => snapshot.ref.getDownloadURL());\n          _this4.array.push(yield task);\n        }\n        return _this4.array;\n      })();\n    }\n    static {\n      this.ɵfac = function ProjectService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ProjectService)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.AngularFirestore), i0.ɵɵinject(i3.AngularFireStorage));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ProjectService,\n        factory: ProjectService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ProjectService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}