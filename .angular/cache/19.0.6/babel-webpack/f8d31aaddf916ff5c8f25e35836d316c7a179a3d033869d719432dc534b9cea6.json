{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/vanya/WebstormProjects/V-Design2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport { passwordMatch } from '../../shared/validators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../shared/services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@ngx-translate/core\";\nfunction RegisterComponent_p_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 18);\n    i0.ɵɵtext(1, \"Please enter valid email!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_p_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 18);\n    i0.ɵɵtext(1, \"Please enter valid password!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_p_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 18);\n    i0.ɵɵtext(1, \"Passwords don't match!\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let RegisterComponent = /*#__PURE__*/(() => {\n  class RegisterComponent {\n    constructor(fb, auth, router, toastr) {\n      this.auth = auth;\n      this.router = router;\n      this.toastr = toastr;\n      this.registerForm = fb.group({\n        username: ['', [Validators.required, Validators.email]],\n        role: ['Customer', Validators.required],\n        passwords: fb.group({\n          password: ['', Validators.required],\n          repeatPassword: ['', Validators.required]\n        }, {\n          validators: [passwordMatch]\n        })\n      });\n    }\n    ngOnInit() {\n      if (this.auth.activeUser) {\n        this.logout();\n      }\n    }\n    register() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const registerObj = _this.registerForm.value;\n        const currentPass = _this.registerForm.value.passwords.password;\n        delete _this.registerForm.value.passwords;\n        yield _this.auth.register(registerObj.username, currentPass);\n      })();\n    }\n    logout() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        yield _this2.auth.logout();\n      })();\n    }\n    static {\n      this.ɵfac = function RegisterComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || RegisterComponent)(i0.ɵɵdirectiveInject(i1.UntypedFormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ToastrService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: RegisterComponent,\n        selectors: [[\"app-register\"]],\n        standalone: false,\n        decls: 30,\n        vars: 7,\n        consts: [[1, \"register\"], [\"src\", \"/assets/img/door-open.jpg\"], [1, \"logo-form\"], [1, \"register-form\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-field\"], [\"for\", \"register-username\", 1, \"user\"], [1, \"hidden\"], [\"formControlName\", \"username\", \"id\", \"register-username\", \"type\", \"text\", \"placeholder\", \"Username\", \"required\", \"\", 1, \"form-input\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"formGroupName\", \"passwords\"], [\"for\", \"password\", 1, \"lock\"], [\"placeholder\", \"Password\", \"type\", \"password\", \"formControlName\", \"password\", \"id\", \"password\", \"minlength\", \"6\", 1, \"form-control\"], [\"for\", \"repeatPassword\", 1, \"lock\"], [\"formControlName\", \"repeatPassword\", \"id\", \"repeatPassword\", \"type\", \"password\", \"placeholder\", \"Confirm password\", \"required\", \"\", 1, \"form-input\"], [1, \"button\"], [1, \"button__horizontal\"], [1, \"button__vertical\"], [1, \"error-message\"]],\n        template: function RegisterComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0);\n            i0.ɵɵelement(1, \"img\", 1);\n            i0.ɵɵelementStart(2, \"div\", 2);\n            i0.ɵɵtext(3);\n            i0.ɵɵpipe(4, \"translate\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"div\", 3)(6, \"form\", 4);\n            i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_6_listener() {\n              return ctx.register();\n            });\n            i0.ɵɵelementStart(7, \"div\", 5)(8, \"label\", 6)(9, \"span\", 7);\n            i0.ɵɵtext(10, \"Username\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(11, \"input\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(12, RegisterComponent_p_12_Template, 2, 0, \"p\", 9);\n            i0.ɵɵelementStart(13, \"div\", 10)(14, \"div\", 5)(15, \"label\", 11)(16, \"span\", 7);\n            i0.ɵɵtext(17, \"Password\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(18, \"input\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(19, RegisterComponent_p_19_Template, 2, 0, \"p\", 9);\n            i0.ɵɵelementStart(20, \"div\", 5)(21, \"label\", 13)(22, \"span\", 7);\n            i0.ɵɵtext(23, \"Confirm Password\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(24, \"input\", 14);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(25, RegisterComponent_p_25_Template, 2, 0, \"p\", 9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"button\", 15);\n            i0.ɵɵtext(27, \" Register \");\n            i0.ɵɵelement(28, \"div\", 16)(29, \"div\", 17);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 5, \"REGISTER.TITLE\"));\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.registerForm);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.registerForm.get(\"username\").invalid && ctx.registerForm.get(\"username\").touched);\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngIf\", ctx.registerForm.controls[\"passwords\"].value[\"password\"].length < 6 && ctx.registerForm.controls[\"passwords\"].value[\"password\"].touched);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.registerForm.controls[\"passwords\"].hasError(\"passwordMatch\"));\n          }\n        },\n        dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.MinLengthValidator, i1.FormGroupDirective, i1.FormControlName, i1.FormGroupName, i6.TranslatePipe],\n        styles: [\".register[_ngcontent-%COMP%]{width:100vw;display:flex;flex-direction:column;align-items:center}.register-form[_ngcontent-%COMP%]{width:80vw;height:auto;border:.2em solid var(--text-primary-color);display:flex;flex-direction:column;align-items:center;padding:.5em;margin:1.4em .5em}.register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-style:italic;color:var(--text-headings-color);border:2px solid var(--golden-text);background-color:var(--text-primary-color);padding:.2em}.register-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:var(--golden-text);border:2px solid var(--golden-text);background-color:var(--text-primary-color)}input.register-form.touched[_ngcontent-%COMP%]{border-color:var(--header-and-footer-color)}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:2em auto;text-shadow:0 0 .2em var(--text-headings-color)}div[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]:last-child{margin-bottom:2em}.register-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:var(--text-headings-color)}input.register-form.touched[_ngcontent-%COMP%]{border:2em solid var(--golden-text)}.register-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-right:2em}.logo-form[_ngcontent-%COMP%]{position:relative;font-weight:700;font-size:2em;color:var(--golden-text);text-shadow:0 0 .2em var(--text-headings-color);padding-left:.5em}.form-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5em}.form-field[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:.4em}.form-field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{color:var(--text-headings-color);font-weight:100}.register-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:1em}.register[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:calc(100% - 1em);height:10em;object-fit:cover;object-position:100% 40%;background-color:#000;opacity:.7}\"]\n      });\n    }\n  }\n  return RegisterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}